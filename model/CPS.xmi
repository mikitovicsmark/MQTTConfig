<?xml version="1.0" encoding="UTF-8"?>
<allocation:CPS
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:allocation="allocation"
    xsi:schemaLocation="allocation Allocation.ecore"
    broker="tcp://localhost:1883">
  <hardwares
      name="LightHardware">
    <instances
        yakindu="//@yakindusm.1"
        clientId="LightClient">
      <subscriber
          inevent="//@yakindusm.1/@inEvents.0 //@yakindusm.1/@inEvents.1"/>
    </instances>
  </hardwares>
  <hardwares
      name="SwitchHardware">
    <instances
        yakindu="//@yakindusm.0"
        clientId="SwitchClient">
      <publisher
          outevent="//@yakindusm.0/@outEvents.0 //@yakindusm.0/@outEvents.1"/>
    </instances>
  </hardwares>
  <topic name="LightSwitch">
    <messages
        content="TurnOn!"/>
    <messages
        content="TurnOff!"/>
  </topic>
  <yakindusm
      timer="true"
      observer="true"
      name="SwitchSM">
    <outEvents
        interface="Publish"
        name="onTurnOn"
        topic="//@topic.0"
        message="//@topic.0/@messages.0"/>
    <outEvents
        interface="Publish"
        name="onTurnOff"
        topic="//@topic.0"
        message="//@topic.0/@messages.1"/>
    <inEvents
        interface="Controls"
        name="switchTurnOn"/>
  </yakindusm>
  <yakindusm
      name="Light">
    <inEvents
        interface="Controls"
        name="turnOn"
        topic="//@topic.0"
        message="//@topic.0/@messages.0"/>
    <inEvents
        interface="Controls"
        name="turnOff"
        topic="//@topic.0"
        message="//@topic.0/@messages.1"/>
  </yakindusm>
</allocation:CPS>
